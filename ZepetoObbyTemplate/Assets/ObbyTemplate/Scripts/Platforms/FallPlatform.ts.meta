fileFormatVersion: 2
guid: 8ead314104c646044ba6fa308c44e065
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: '{"source":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\",
    { value: true });\r\nconst __UnityEngine__ = require(\"UnityEngine\");\r\nconst
    UnityEngine_1 = require(\"UnityEngine\");\r\nconst ZEPETO_Script_1 = require(\"ZEPETO.Script\");\r\nconst
    GameSettings_1 = require(\"../Managers/GameSettings\");\r\n// This class  controls
    the platforms that can fall when the player steps inside\r\nclass FallPlatform
    extends ZEPETO_Script_1.ZepetoScriptBehaviour {\r\n    constructor() {\r\n       
    super(...arguments);\r\n        this.fallDelay = 0.1; //Time it takes to start
    falling\r\n        this.respawnDelay = 5; //Time it takes to respawn\r\n    }\r\n   
    Awake() {\r\n        //Get the Collider reference on this GameObject\r\n       
    this._myCollider = this.gameObject.GetComponent($typeof(UnityEngine_1.BoxCollider));\r\n       
    //Get the Rigidbody reference on this GameObject\r\n        this._myRigidbody
    = this.gameObject.GetComponent($typeof(UnityEngine_1.Rigidbody));\r\n    }\r\n   
    Start() {\r\n        if (this.transform.childCount > 0) {\r\n            let
    child = this.transform\r\n                .GetChild(0)\r\n                .GetComponent($typeof(UnityEngine_1.BoxCollider));
    //Get Collider on the child\r\n            this._myCollider.center = new UnityEngine_1.Vector3(child.center.x,
    0.5, child.center.z); //Rebuild Center of this collider\r\n            this._myCollider.size
    = new UnityEngine_1.Vector3(child.transform.localScale.x * child.size.x, 1, child.transform.localScale.z
    * child.size.z); //Rebuild Size of this collider\r\n            this._myCollider.isTrigger
    = true; //Set it Trigger\r\n        }\r\n        //Set init pos\r\n        this._initPosY
    = this.transform.position.y;\r\n    }\r\n    OnTriggerEnter(collider) {\r\n       
    if (GameSettings_1.default.Instance.zepetoCharacter == null || __UnityEngine__.Object.op_Inequality(collider.gameObject,
    GameSettings_1.default.Instance.zepetoCharacter.gameObject))\r\n            return;\r\n       
    if (!this._falling) {\r\n            //Start falling\r\n            this._falling
    = true;\r\n            this.Invoke(\"FallPlatform\", this.fallDelay);\r\n       
    }\r\n    }\r\n    // Active the gravity for the platform so it falls down\r\n   
    FallPlatform() {\r\n        this._myRigidbody.isKinematic = false;\r\n       
    this._myRigidbody.useGravity = true;\r\n        //Start respawning\r\n       
    this.Invoke(\"RespawnPlatform\", this.respawnDelay);\r\n    }\r\n    // Reset
    the platform to the start position \r\n    RespawnPlatform() {\r\n        this._falling
    = false; // Flag of is falling\r\n        this._myRigidbody.isKinematic = true;
    // Reset the kinematic and the gravity, doing that the platform will not fall
    when it respawns\r\n        this._myRigidbody.useGravity = false;\r\n       
    this.transform.rotation = UnityEngine_1.Quaternion.Euler(0, 0, 0); // Set the
    rotation to zero\r\n        this.transform.position = new UnityEngine_1.Vector3(this.transform.position.x,
    this._initPosY, this.transform.position.z); // Set the position into the exact
    same position but reset his Y position to the initial.\r\n    }\r\n}\r\nexports.default
    = FallPlatform;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmFsbFBsYXRmb3JtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiRmFsbFBsYXRmb3JtLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLDZDQUFvRjtBQUNwRixpREFBc0Q7QUFDdEQsMkRBQW9EO0FBR3BELGdGQUFnRjtBQUNoRixNQUFxQixZQUFhLFNBQVEscUNBQXFCO0lBQS9EOztRQUVTLGNBQVMsR0FBVyxHQUFHLENBQUMsQ0FBQyxnQ0FBZ0M7UUFDekQsaUJBQVksR0FBVyxDQUFDLENBQUMsQ0FBQywwQkFBMEI7SUE2RTdELENBQUM7SUFyRUMsS0FBSztRQUNILCtDQUErQztRQUMvQyxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsWUFBWSxTQUFDLHlCQUFXLEVBQUcsQ0FBQztRQUUvRCxnREFBZ0Q7UUFDaEQsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFlBQVksU0FBQyx1QkFBUyxFQUFHLENBQUM7SUFDaEUsQ0FBQztJQUVELEtBQUs7UUFDSCxJQUFLLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxHQUFHLENBQUMsRUFDbEM7WUFDRSxJQUFJLEtBQUssR0FBZ0IsSUFBSSxDQUFDLFNBQVM7aUJBQ3BDLFFBQVEsQ0FBRSxDQUFDLENBQUU7aUJBQ2IsWUFBWSxTQUFDLHlCQUFXLEVBQUcsQ0FBQyxDQUFDLDJCQUEyQjtZQUMzRCxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sR0FBRyxJQUFJLHFCQUFPLENBQ25DLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUNkLEdBQUcsRUFDSCxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FDZixDQUFDLENBQUMsaUNBQWlDO1lBQ3BDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxHQUFHLElBQUkscUJBQU8sQ0FDakMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUMzQyxDQUFDLEVBQ0QsS0FBSyxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUM1QyxDQUFDLENBQUMsK0JBQStCO1lBQ2xDLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxDQUFDLGdCQUFnQjtTQUNwRDtRQUVELGNBQWM7UUFDZCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztJQUM3QyxDQUFDO0lBRUQsY0FBYyxDQUFHLFFBQWtCO1FBQ2pDLElBQ0Usc0JBQVksQ0FBQyxRQUFRLENBQUMsZUFBZSxJQUFJLElBQUksMkJBcUMwclEsYUFBYyxDQXBDcnZRLFFBQVEsQ0FBQyxVQUFVLEVBQUksc0JBQVksQ0FBQyxRQUFRLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQTtZQUV2RSxPQUFPO1FBRVQsSUFBSyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQ25CO1lBQ0UsZUFBZTtZQUNmLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1lBQ3JCLElBQUksQ0FBQyxNQUFNLENBQUUsY0FBYyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUUsQ0FBQztTQUMvQztJQUNILENBQUM7SUFFRCx1REFBdUQ7SUFDdkQsWUFBWTtRQUNWLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztRQUN0QyxJQUFJLENBQUMsWUFBWSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7UUFFcEMsa0JBQWtCO1FBQ2xCLElBQUksQ0FBQyxNQUFNLENBQUUsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBRSxDQUFDO0lBQ3RELENBQUM7SUFFRCw0Q0FBNEM7SUFDNUMsZUFBZTtRQUNiLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDLENBQUMscUJBQXFCO1FBRTVDLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxDQUFDLDhGQUE4RjtRQUNwSSxJQUFJLENBQUMsWUFBWSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7UUFFckMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEdBQUcsd0JBQVUsQ0FBQyxLQUFLLENBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUUsQ0FBQyxDQUFDLDJCQUEyQjtRQUNsRixJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsR0FBRyxJQUFJLHFCQUFPLENBQ25DLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsRUFDekIsSUFBSSxDQUFDLFNBQVMsRUFDZCxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQzFCLENBQUMsQ0FBQyx5RkFBeUY7SUFDOUYsQ0FBQztDQUNGO0FBaEZELCtCQWdGQyJ9","assetPath":"Assets/ObbyTemplate/Scripts/Platforms/FallPlatform.ts","manifest":{"properties":[{"assembly":"mscorlib","name":"fallDelay","type":"System.Single","isArray":false,"initValue":["0.1"],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"mscorlib","name":"respawnDelay","type":"System.Single","isArray":false,"initValue":["5"],"enumKeys":[],"enumValues":[],"attributes":[]}],"name":"FallPlatform","description":"","hasAnimatorMove":false},"isCompiled":true}'
  typescriptHash: 04f27a2619d86fac8fce3fd7054fa44e
  onlyWriteTrigger: 0
